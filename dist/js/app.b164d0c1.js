(function(){"use strict";var e={2136:function(e,t,a){var n=a(9242),l=a(3396),o=a(4870),i=a(7178),u=a(6265),d=a.n(u);(0,o.iH)("/json"),(0,o.iH)("/oauth2");const r=()=>d().get("http://10.200.148.186:9094/ksAccessToken?app_id=ks677510272632699148&app_secret=WXjAcWmNKOcOvhx5ZWAagw&grant_type=client_credentials"),s=e=>d().post(`http://10.200.148.186:9094/ksApply?app_id=ks677510272632699148&access_token=${e}`),c=(e,t)=>d()({method:"post",url:`http://${t.endpoint}/api/upload?upload_token=${t.upload_token}`,data:e,headers:{"Content-Type":"-"}}),p=(e,t)=>d().post(`http://10.200.148.186:9094/ksPublish?app_id=ks677510272632699148&access_token=${e}&upload_token=${t}`),f=e=>d().get(`http://coapiwebsit.cnsuning.com/coapi-web/api/vid/mapping/callback?channelId=${e.channelId}&vid=${e.vid}&pid=${e.pid}&customVid=${e.customVid}`),v=(0,l._)("div",{class:"el-upload__text"},[(0,l._)("em",null,"单击文件上传")],-1),m={class:"demo-progress",style:{"max-width":"460px",margin:"auto"}};var g=(0,l.aZ)({__name:"App",setup(e){const t=(0,o.iH)(),a=(0,o.iH)(null);t.value={channelId:"253345",vid:"",pid:"",customVid:""};const n=10485760;let u=(0,o.iH)();const d=async e=>{const a=e.size;let l=Math.ceil(a/n);a<n&&(l=1),console.log("总分片"+l);for(let o=0;o<l;o++){console.log("----file----",e);const i=o*n,d=Math.min(a,i+n),f=e.raw.slice(i,d),v=new FormData;v.append("data",f),v.append("lastModified",e.uid),v.append("total",l.toString()),v.append("fileName",e.name),v.append("index",o.toString()),console.log(`"上传第N个分片 ${o}`);let m=await r();if(1==m.data.result){let a=await s(m.data.access_token);if(1==a.data.result){let n=await c(e,a.data.data);if(1==n.data.result){let e=await p(m.data.access_token,a.data.data.upload_token);1==e.data.result&&(t.value.customVid=e.data.data.videoId)}}}u.value=parseFloat(((o+1)/l*100).toFixed(2))}},g=e=>{i.z8.warning(`每次只允许上传一个视频, 您选择了 ${e.length} 个视频，请修改`)},h=()=>{console.log("上传成功"),t.value={channelId:"253345",vid:"",pid:"",customVid:""},a.value.clearFiles(),u.value=0},_=async()=>{if(console.log("submitForm",t.value),""==t.value.vid&&""==t.value.pid)i.z8.warning("请填写vid或pid");else if(t.value.vid&&t.value.pid)alert("vid，pid只能选一个填"),i.z8.warning("vid，pid只能选一个填");else if(""==t.value.customVid)i.z8.warning("请上传视频");else{let e=await f(t.value);"success"==e.data.msg&&(i.z8.success("成功"),setTimeout((()=>{t.value={channelId:"253345",vid:"",pid:"",customVid:""},a.value.clearFiles(),u.value=0}),500))}},w=()=>{t.value={channelId:"253345",vid:"",pid:"",customVid:""},a.value.clearFiles(),u.value=0,console.log("resetForm",t.value)};return(e,n)=>{const i=(0,l.up)("el-input"),r=(0,l.up)("el-form-item"),s=(0,l.up)("upload-filled"),c=(0,l.up)("el-icon"),p=(0,l.up)("el-upload"),f=(0,l.up)("el-progress"),b=(0,l.up)("el-button"),k=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(k,{"label-position":e.labelPosition,"label-width":"100px",model:t.value,style:{"max-width":"460px",margin:"auto"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{label:"Vid"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:t.value.vid,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value.vid=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Pid"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:t.value.pid,"onUpdate:modelValue":n[1]||(n[1]=e=>t.value.pid=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(p,{class:"upload-demo",drag:!0,action:"",ref_key:"ruleUpload",ref:a,limit:1,multiple:!0,"on-change":d,"on-exceed":g,"on-success":h,"auto-upload":!1,style:{"max-width":"460px",margin:"auto"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"el-icon--upload"},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1}),v])),_:1},512),(0,l._)("div",m,[(0,l.Wm)(f,{percentage:(0,o.SU)(u)},null,8,["percentage"])]),(0,l.Wm)(r,{style:{"margin-top":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{type:"primary",onClick:_},{default:(0,l.w5)((()=>[(0,l.Uk)("Create")])),_:1}),(0,l.Wm)(b,{onClick:w},{default:(0,l.w5)((()=>[(0,l.Uk)("Reset")])),_:1})])),_:1})])),_:1},8,["label-position","model"])}}});const h=g;var _=h,w=a(7173),b=(a(4415),a(2748));const k=(0,n.ri)(_);k.use(w.Z);for(const[y,x]of Object.entries(b))k.component(y,x);k.mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,o){if(!n){var i=1/0;for(s=0;s<e.length;s++){n=e[s][0],l=e[s][1],o=e[s][2];for(var u=!0,d=0;d<n.length;d++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[d])}))?n.splice(d--,1):(u=!1,o<i&&(i=o));if(u){e.splice(s--,1);var r=l();void 0!==r&&(t=r)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,i=n[0],u=n[1],d=n[2],r=0;if(i.some((function(t){return 0!==e[t]}))){for(l in u)a.o(u,l)&&(a.m[l]=u[l]);if(d)var s=d(a)}for(t&&t(n);r<i.length;r++)o=i[r],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},n=self["webpackChunkelectron_quick_start"]=self["webpackChunkelectron_quick_start"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(2136)}));n=a.O(n)})();
//# sourceMappingURL=app.b164d0c1.js.map